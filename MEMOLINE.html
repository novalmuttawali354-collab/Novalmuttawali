<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LINETOGEL - J.A.R.V.I.S AUTO-SYNC 6.2 (MODE SWITCH)</title>
    <style>
        /* =========================================
           IRONMAN DIGITAL MODERN THEME
           ========================================= */
        
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap');

        :root {
            --primary-color: #00f3ff;
            --primary-glow: rgba(0, 243, 255, 0.6);
            --primary-dim: rgba(0, 243, 255, 0.1);
            --secondary-color: #0051ff;
            --accent-color: #ff2a2a;
            --pk-color: #ff0055; /* Warna khusus mode PK (Merah Neon) */
            --pk-glow: rgba(255, 0, 85, 0.6);
            --bg-dark: #050505;
            --bg-panel: #0a0a0f;
            --bg-card: rgba(16, 24, 40, 0.85);
            --text-main: #ffffff;
            --text-muted: #8b9bb4;
            --border-glow: 0 0 15px rgba(0, 243, 255, 0.4);
            --text-glow: 0 0 8px rgba(0, 243, 255, 0.6);
            
            /* Layout Dimensions */
            --sidebar-width: 280px;
            --sidebar-collapsed: 70px;
            --rightpanel-width: 320px;
            --header-height: 70px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scrollbar-width: thin; scrollbar-color: var(--primary-color) var(--bg-dark); }

        body {
            font-family: 'Rajdhani', sans-serif;
            color: var(--text-main);
            line-height: 1.6;
            overflow: hidden; 
            height: 100vh;
            /* UPDATED BACKGROUND: TIGER IMAGE + OVERLAY */
            background: url('https://i.ibb.co/3ybvCHJm/adv.gif') no-repeat center center fixed;
            background-size: cover;
        }

        /* Dark Overlay untuk memastikan teks terbaca di atas gambar harimau */
        body::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(5, 5, 10, 0.88); /* Overlay hitam transparan */
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                radial-gradient(circle at 50% 50%, rgba(0, 243, 255, 0.05) 0%, transparent 100%);
            background-size: 40px 40px, 40px 40px, 100% 100%;
            z-index: -1;
            pointer-events: none;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--secondary-color); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-color); box-shadow: 0 0 10px var(--primary-color); }

        .app-container { display: flex; height: 100vh; position: relative; width: 100vw; opacity: 0; transition: opacity 1s ease; }
        .app-container.loaded { opacity: 1; }

        /* =========================================
           NEON GLITCH INTRO STYLES (NEW)
           ========================================= */
        .intro-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            z-index: 99999;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            overflow: hidden;
        }

        .intro-overlay.hidden {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease-in-out;
        }

        .glitch-container {
            position: relative;
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            letter-spacing: 5px;
            color: #fff;
            text-transform: uppercase;
            text-align: center;
            /* Animasi masuk */
            animation: introZoomIn 1.5s cubic-bezier(0.23, 1, 0.32, 1) forwards, 
                       introFadeOut 0.5s ease-in 3.5s forwards;
        }

        .glitch-icon {
            font-size: 5rem;
            display: block;
            margin-bottom: 20px;
            color: var(--primary-color);
            animation: pulse-reactor 2s infinite;
        }

        /* Glitch Effect Layers */
        .glitch-container::before,
        .glitch-container::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }

        .glitch-container::before {
            left: 2px;
            text-shadow: -2px 0 #ff00c1;
            clip-path: inset(44% 0 61% 0);
            animation: glitch-anim-1 2s infinite linear alternate-reverse;
        }

        .glitch-container::after {
            left: -2px;
            text-shadow: -2px 0 #00fff9;
            clip-path: inset(10% 0 86% 0);
            animation: glitch-anim-2 2s infinite linear alternate-reverse;
        }

        .scanline {
            width: 100%;
            height: 5px;
            background: rgba(0, 243, 255, 0.1);
            position: absolute;
            z-index: 10;
            top: 0;
            animation: scanline 4s linear infinite;
            pointer-events: none;
        }

        /* Intro Keyframes */
        @keyframes introZoomIn {
            0% { opacity: 0; transform: scale(3); filter: blur(10px); }
            50% { opacity: 1; filter: blur(0); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes introFadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; transform: scale(0.9); }
        }
        @keyframes scanline {
            0% { top: -10%; opacity: 0; }
            50% { opacity: 1; }
            100% { top: 110%; opacity: 0; }
        }
        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); }
            20% { clip-path: inset(60% 0 10% 0); }
            40% { clip-path: inset(40% 0 50% 0); }
            60% { clip-path: inset(80% 0 5% 0); }
            80% { clip-path: inset(10% 0 60% 0); }
            100% { clip-path: inset(30% 0 30% 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); }
            20% { clip-path: inset(80% 0 5% 0); }
            40% { clip-path: inset(30% 0 20% 0); }
            60% { clip-path: inset(10% 0 80% 0); }
            80% { clip-path: inset(50% 0 10% 0); }
            100% { clip-path: inset(70% 0 20% 0); }
        }

        /* =========================================
           1. LEFT SIDEBAR
           ========================================= */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(180deg, rgba(5,5,10,0.98) 0%, rgba(10,10,20,0.98) 100%);
            color: white;
            height: 100vh;
            border-right: 1px solid rgba(0, 243, 255, 0.2);
            display: flex;
            flex-direction: column;
            z-index: 1000;
            flex-shrink: 0;
            transition: width 0.3s ease;
            box-shadow: 10px 0 30px rgba(0,0,0,0.5);
        }

        .sidebar-header {
            padding: 25px 15px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1) 0%, transparent 100%);
            transition: background 0.3s;
        }
        
        .sidebar.pk-mode-active .sidebar-header {
            background: linear-gradient(135deg, rgba(255, 0, 85, 0.15) 0%, transparent 100%);
            border-bottom-color: rgba(255, 0, 85, 0.4);
        }

        .logo { display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 8px; }
        .logo-icon { font-size: 2.2rem; color: var(--primary-color); filter: drop-shadow(0 0 15px var(--primary-color)); animation: pulse-reactor 3s infinite ease-in-out; }
        
        .pk-mode-active .logo-icon { color: var(--pk-color); filter: drop-shadow(0 0 15px var(--pk-color)); }

        @keyframes pulse-reactor { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        
        .logo-text { font-family: 'Orbitron', sans-serif; font-size: 1.3rem; font-weight: 900; color: #fff; letter-spacing: 2px; text-shadow: 0 0 10px rgba(255,255,255,0.3); }
        .sidebar-subtitle { font-size: 0.8rem; color: var(--primary-color); letter-spacing: 3px; text-transform: uppercase; font-weight: 600; }
        .pk-mode-active .sidebar-subtitle { color: var(--pk-color); }

        .sidebar-nav { padding: 20px 0; overflow-y: auto; flex: 1; }
        .nav-section { margin-bottom: 25px; }
        .nav-title { padding: 0 20px 8px; font-family: 'Orbitron', sans-serif; font-size: 0.7rem; letter-spacing: 2px; color: var(--text-muted); text-transform: uppercase; font-weight: 700; }

        .sidebar-item {
            display: flex; align-items: center; padding: 14px 20px; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); margin: 0 15px; border-radius: 8px; color: var(--text-muted); border: 1px solid transparent;
        }
        .sidebar-item:hover { background: rgba(0, 243, 255, 0.1); color: #fff; border-color: rgba(0, 243, 255, 0.3); transform: translateX(5px); }
        
        .pk-mode-active .sidebar-item:hover { background: rgba(255, 0, 85, 0.1); border-color: rgba(255, 0, 85, 0.4); }

        .sidebar-item.active { 
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.25) 0%, transparent 100%); 
            color: var(--primary-color); 
            border-left: 4px solid var(--primary-color);
            font-weight: 700;
            text-shadow: 0 0 10px var(--primary-glow);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.1) inset;
        }
        
        .pk-mode-active .sidebar-item.active { 
            background: linear-gradient(90deg, rgba(255, 0, 85, 0.25) 0%, transparent 100%); 
            color: var(--pk-color); 
            border-left: 4px solid var(--pk-color);
            text-shadow: 0 0 10px var(--pk-glow);
            box-shadow: 0 0 15px rgba(255, 0, 85, 0.1) inset;
        }

        
        .sidebar-icon { font-size: 1.2rem; min-width: 30px; text-align: center; margin-right: 15px; }
        .sidebar-text { font-weight: 600; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.5px; }

        /* =========================================
           2. MAIN CONTENT
           ========================================= */
        .main-content {
            flex: 1;
            background: rgba(5, 5, 8, 0.3); /* More transparent to show background image */
            display: flex;
            flex-direction: column;
            position: relative;
            border-right: 1px solid rgba(0, 243, 255, 0.15);
        }

        .top-bar {
            height: 70px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            display: flex; align-items: center; justify-content: space-between; padding: 0 30px;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
        }
        .current-sheet { font-family: 'Orbitron', sans-serif; font-size: 1.1rem; color: var(--primary-color); text-shadow: 0 0 10px var(--primary-color); font-weight: 700; letter-spacing: 1px; }
        .pk-mode-active .current-sheet { color: var(--pk-color); text-shadow: 0 0 10px var(--pk-glow); }
        
        .toggle-btn { background: rgba(0, 243, 255, 0.1); border: 1px solid var(--primary-color); color: var(--primary-color); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: none; transition: 0.3s; }
        .toggle-btn:hover { background: var(--primary-color); color: #000; box-shadow: 0 0 15px var(--primary-color); }

        /* SEARCH AREA & CONTROLS */
        .search-area {
            padding: 30px 40px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 25%;
            background: radial-gradient(circle at center, rgba(0, 243, 255, 0.08) 0%, transparent 70%);
            transition: background 0.5s;
        }
        
        .pk-mode-active .search-area {
            background: radial-gradient(circle at center, rgba(255, 0, 85, 0.08) 0%, transparent 70%);
        }

        /* MODE SWITCH CONTAINER */
        .controls-wrapper {
            display: flex;
            gap: 30px;
            margin-bottom: 20px;
            align-items: center;
            background: rgba(10, 10, 15, 0.7);
            padding: 8px 25px;
            border-radius: 100px;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
        }

        .search-wrapper-group {
            position: relative; width: 100%; max-width: 800px;
            display: flex; align-items: center; gap: 20px;
            background: rgba(10, 10, 15, 0.85);
            padding: 10px 25px;
            border-radius: 100px; 
            border: 1px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            transition: border-color 0.3s;
        }
        
        .pk-mode-active .search-wrapper-group {
            border-color: rgba(255, 0, 85, 0.4);
        }

        .search-input-main {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-family: 'Rajdhani', sans-serif;
            font-size: 1.3rem;
            font-weight: 600;
            padding: 10px 5px;
            outline: none;
            text-align: center;
            letter-spacing: 1px;
        }
        .search-input-main::placeholder { color: rgba(255,255,255,0.4); font-weight: 400; font-size: 1.1rem; }

        /* --- TOGGLE SWITCHES --- */
        .toggle-container { display: flex; align-items: center; gap: 12px; cursor: pointer; user-select: none; }
        
        .switch { position: relative; display: inline-block; width: 56px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(255,255,255,0.1); transition: .4s; border-radius: 34px; border: 1px solid rgba(255,255,255,0.2); }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; box-shadow: 0 0 10px rgba(0,0,0,0.5); }
        
        /* Global Search Toggle */
        input:checked + .slider { background-color: var(--primary-color); box-shadow: 0 0 20px var(--primary-color); border-color: transparent; }
        input:checked + .slider:before { transform: translateX(28px); background-color: #000; }
        
        /* PK Mode Toggle (Merah) */
        #pkModeToggle:checked + .slider { background-color: var(--pk-color); box-shadow: 0 0 20px var(--pk-color); border-color: transparent; }
        #pkModeToggle:checked + .slider:before { transform: translateX(28px); background-color: #fff; }

        .toggle-label { font-family: 'Orbitron', sans-serif; font-size: 0.75rem; font-weight: 700; color: var(--text-muted); letter-spacing: 1.5px; text-transform: uppercase; transition: 0.3s; }
        .toggle-label.active-mode { color: var(--primary-color); text-shadow: 0 0 8px var(--primary-glow); }
        
        .toggle-label.pk-active { color: var(--pk-color); text-shadow: 0 0 8px var(--pk-glow); }

        /* DETAIL VIEWER */
        .detail-viewer {
            flex: 1;
            padding: 20px 50px 50px 50px;
            overflow-y: auto;
            display: flex; flex-direction: column; align-items: center;
        }

        .data-card-large {
            width: 100%; max-width: 850px;
            background: rgba(18, 25, 40, 0.85); 
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 16px;
            padding: 0; 
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 1px rgba(0, 243, 255, 0.5); 
            animation: slideUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(15px);
            transition: border-color 0.3s;
        }
        
        .pk-mode-active .data-card-large {
            border-color: rgba(255, 0, 85, 0.4);
            box-shadow: 0 20px 60px rgba(0,0,0,0.6), 0 0 1px rgba(255, 0, 85, 0.5);
        }
        
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }

        .card-header-large {
            display: flex; justify-content: space-between; align-items: center;
            margin: 0; padding: 25px 35px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.1) 0%, transparent 100%);
            border-radius: 16px 16px 0 0;
            transition: background 0.3s;
        }
        
        .pk-mode-active .card-header-large {
            background: linear-gradient(90deg, rgba(255, 0, 85, 0.1) 0%, transparent 100%);
        }
        
        .card-title-large { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: #fff; text-transform: uppercase; letter-spacing: 1.5px; font-weight: 800; }
        .card-id-large { font-family: 'Rajdhani', sans-serif; font-size: 0.9rem; color: #fff; background: var(--primary-color); padding: 6px 15px; border-radius: 20px; font-weight: 700; box-shadow: 0 0 10px var(--primary-color); }
        .pk-mode-active .card-id-large { background: var(--pk-color); box-shadow: 0 0 10px var(--pk-color); }

        .card-content-large {
            font-size: 1.15rem; 
            color: #e6e6e6; 
            line-height: 1.9; 
            text-align: justify; 
            white-space: pre-wrap; 
            word-wrap: break-word; 
            padding: 30px 40px; 
            background: rgba(0, 0, 0, 0.2); 
            border-left: 5px solid var(--primary-color); 
            font-family: 'Rajdhani', sans-serif;
            font-weight: 500; 
            min-height: 150px; 
            transition: border-color 0.3s;
        }
        
        .pk-mode-active .card-content-large {
            border-left: 5px solid var(--pk-color);
        }

        .content-paragraph { margin-bottom: 20px; display: block; }

        .card-content-large a { 
            color: var(--primary-color); 
            background: rgba(0, 243, 255, 0.2);
            border-bottom: 2px solid var(--primary-color); 
            text-decoration: none; 
            padding: 0 6px;
            border-radius: 4px;
            transition: 0.2s;
            font-weight: 700;
        }
        .pk-mode-active .card-content-large a { color: var(--pk-color); background: rgba(255, 0, 85, 0.2); border-bottom-color: var(--pk-color); }
        
        .card-content-large a:hover { 
            background: var(--primary-color); 
            color: #000;
            text-shadow: none;
            box-shadow: 0 0 15px var(--primary-color);
        }
        .pk-mode-active .card-content-large a:hover { background: var(--pk-color); box-shadow: 0 0 15px var(--pk-color); }

        .copy-btn-large {
            margin: 0; 
            width: 100%; 
            padding: 18px;
            background: linear-gradient(180deg, rgba(0, 243, 255, 0.1) 0%, rgba(0,0,0,0) 100%);
            border-top: 1px solid rgba(255,255,255,0.1);
            color: var(--text-muted);
            font-family: 'Orbitron', sans-serif; 
            font-weight: 700; 
            letter-spacing: 2px;
            cursor: pointer; 
            transition: all 0.3s; 
            border-radius: 0 0 16px 16px;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 12px;
            font-size: 1rem;
        }
        .copy-btn-large:hover { 
            background: rgba(0, 243, 255, 0.2); 
            color: var(--primary-color);
            border-top-color: var(--primary-color);
            padding-top: 22px; 
        }
        .pk-mode-active .copy-btn-large:hover { 
            background: rgba(255, 0, 85, 0.2); 
            color: var(--pk-color);
            border-top-color: var(--pk-color);
        }

        /* =========================================
           3. RIGHT PANEL
           ========================================= */
        .right-panel {
            width: var(--rightpanel-width);
            background: rgba(10, 12, 20, 0.98);
            border-left: 1px solid rgba(0, 243, 255, 0.2);
            display: flex; flex-direction: column;
            backdrop-filter: blur(20px);
            z-index: 900;
            box-shadow: -10px 0 30px rgba(0,0,0,0.5);
            transition: border-color 0.3s;
        }
        
        .pk-mode-active .right-panel { border-left-color: rgba(255, 0, 85, 0.3); }

        .right-header {
            padding: 20px; text-align: center; border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            background: linear-gradient(180deg, rgba(0, 243, 255, 0.1) 0%, transparent 100%);
            transition: 0.3s;
        }
        
        .pk-mode-active .right-header {
            border-bottom-color: rgba(255, 0, 85, 0.3);
            background: linear-gradient(180deg, rgba(255, 0, 85, 0.1) 0%, transparent 100%);
        }
        
        .right-title { font-family: 'Orbitron', sans-serif; font-size: 1rem; color: var(--primary-color); letter-spacing: 3px; font-weight: 700; text-shadow: 0 0 10px var(--primary-glow); transition: 0.3s; }
        .pk-mode-active .right-title { color: var(--pk-color); text-shadow: 0 0 10px var(--pk-glow); }

        .data-list-container {
            flex: 1; overflow-y: auto; padding: 15px;
            scroll-behavior: smooth;
        }

        .list-item {
            padding: 16px 18px;
            background: rgba(255,255,255,0.04);
            border: 1px solid transparent;
            margin-bottom: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #d1d5db;
            font-size: 0.95rem;
            font-weight: 700;
            display: flex; flex-direction: column; 
            align-items: flex-start;
            border-left: 3px solid rgba(0, 243, 255, 0.2);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateX(20px);
        }
        
        @keyframes slideInRight {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .list-item:hover { 
            background: rgba(255,255,255,0.1); 
            color: #fff; 
            border-color: rgba(0, 243, 255, 0.5);
            border-left: 3px solid #fff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .pk-mode-active .list-item:hover {
            border-color: rgba(255, 0, 85, 0.5);
        }
        
        .list-item.active { 
            background: linear-gradient(90deg, rgba(0, 243, 255, 0.2) 0%, rgba(0,0,0,0) 100%); 
            color: var(--primary-color); 
            border: 1px solid var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2) inset;
            border-left: 4px solid var(--primary-color);
        }
        
        .pk-mode-active .list-item.active { 
            background: linear-gradient(90deg, rgba(255, 0, 85, 0.2) 0%, rgba(0,0,0,0) 100%); 
            color: var(--pk-color); 
            border: 1px solid var(--pk-color);
            box-shadow: 0 0 20px rgba(255, 0, 85, 0.2) inset;
            border-left: 4px solid var(--pk-color);
        }
        
        .list-item-category {
            font-size: 0.7rem;
            color: #fff;
            background: var(--accent-color);
            padding: 3px 8px;
            border-radius: 4px;
            margin-bottom: 6px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .list-item-title { font-weight: 700; line-height: 1.4; }
        .list-arrow { display: none; }

        /* Empty State Center */
        .empty-center { text-align: center; color: var(--text-muted); margin-top: 50px; }
        .empty-icon-center { font-size: 5rem; margin-bottom: 25px; opacity: 0.3; filter: drop-shadow(0 0 15px var(--primary-color)); animation: float 3s ease-in-out infinite; transition: color 0.3s; }
        .pk-mode-active .empty-icon-center { filter: drop-shadow(0 0 15px var(--pk-color)); color: var(--pk-color); }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Toast */
        .toast {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%) translateY(100px);
            background: rgba(0, 10, 20, 0.9); border: 1px solid var(--primary-color); color: var(--primary-color);
            padding: 15px 40px; border-radius: 50px; backdrop-filter: blur(10px); z-index: 3000;
            font-family: 'Orbitron'; font-size: 1rem; font-weight: 700; letter-spacing: 1px;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.3);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        .pk-mode-active .toast { border-color: var(--pk-color); color: var(--pk-color); box-shadow: 0 0 30px rgba(255, 0, 85, 0.3); }
        .toast.show { transform: translateX(-50%) translateY(0); }

        /* Responsive */
        @media (max-width: 1200px) {
            .right-panel { width: 280px; }
        }
        @media (max-width: 1024px) {
            .right-panel { display: none; }
            .main-content { border-right: none; }
            .search-wrapper-group { padding: 15px; }
        }
        @media (max-width: 768px) {
            .sidebar { position: absolute; transform: translateX(-100%); width: 85%; }
            .sidebar.active { transform: translateX(0); }
            .toggle-btn { display: flex; }
            .app-container { flex-direction: column; overflow: auto; height: auto; }
            .main-content { height: auto; overflow: visible; }
            .data-card-large { margin-bottom: 20px; border-radius: 12px; }
            .card-content-large { text-align: left; padding: 20px; }
            .search-input-main { font-size: 1rem; }
            .list-item { padding: 12px; font-size: 0.9rem; }
            .glitch-container { font-size: 2.5rem; }
            .glitch-icon { font-size: 3rem; }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- NEON GLITCH INTRO OVERLAY -->
    <div class="intro-overlay" id="introOverlay">
        <div class="scanline"></div>
        <div class="glitch-container" data-text="LINETOGEL">
            <i class="fas fa-microchip glitch-icon"></i>
            <div>LINETOGEL</div>
        </div>
    </div>

    <div class="app-container" id="appContainer">
        <!-- 1. LEFT SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon"><i class="fas fa-microchip"></i></div>
                    <div class="logo-text">LINETOGEL</div>
                </div>
                <div class="sidebar-subtitle">SYSTEM ONLINE</div>
            </div>

            <!-- NAV AKAN DIISI OLEH JAVASCRIPT SECARA DINAMIS -->
            <nav class="sidebar-nav" id="sidebarNav">
                <div style="text-align:center; padding:20px; color:var(--text-muted);">
                    <div class="spinner" style="margin:0 auto 10px; width:30px; height:30px; border-width:3px; border-top-color:var(--text-muted);"></div>
                    <small>SYNCING MENU...</small>
                </div>
            </nav>
        </aside>

        <!-- 2. CENTER CONTENT -->
        <main class="main-content">
            <div class="top-bar">
                <div class="current-sheet">
                    <i class="fas fa-database"></i>
                    <span id="currentSheetTitle">LOADING...</span>
                </div>
                <button class="toggle-btn" id="toggleSidebar"><i class="fas fa-bars"></i></button>
            </div>

            <div class="search-area">
                <!-- CONTROL BAR: MODE SWITCH -->
                <div class="controls-wrapper">
                    <!-- SWITCH 1: GLOBAL SEARCH -->
                    <div class="toggle-container" title="Aktifkan pencarian semua kategori">
                        <label class="switch">
                            <input type="checkbox" id="globalToggle">
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label" id="globalToggleLabel">GLOBAL SEARCH</span>
                    </div>

                    <!-- SWITCH 2: MODE PK (BARU) -->
                    <div style="width:1px; height:25px; background:rgba(255,255,255,0.2);"></div> <!-- Separator -->
                    
                    <div class="toggle-container" title="Ubah tampilan ke Menu PK Games">
                        <label class="switch">
                            <input type="checkbox" id="pkModeToggle">
                            <span class="slider round"></span>
                        </label>
                        <span class="toggle-label" id="pkModeLabel">MODE PK</span>
                    </div>
                </div>

                <!-- INPUT SEARCH -->
                <div class="search-wrapper-group">
                    <input type="text" id="centerSearchInput" class="search-input-main" placeholder="CARI DATA..." autocomplete="off">
                </div>
            </div>

            <div class="detail-viewer" id="detailViewer">
                <div class="empty-center">
                    <div class="spinner"></div>
                    <p>INITIALIZING SYSTEM...</p>
                </div>
            </div>
        </main>

        <!-- 3. RIGHT PANEL -->
        <aside class="right-panel">
            <div class="right-header">
                <div class="right-title" id="rightPanelTitle">DATA INDEX</div>
            </div>
            <div class="data-list-container" id="rightDataList"></div>
        </aside>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="copyToast">
        <i class="fas fa-check-circle"></i> DATA COPIED
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // ===============================
        // INTRO ANIMATION LOGIC (NEW)
        // ===============================
        window.addEventListener('load', () => {
            const introOverlay = document.getElementById('introOverlay');
            const appContainer = document.getElementById('appContainer');

            // Intro duration matches CSS animations (approx 3.5s)
            setTimeout(() => {
                introOverlay.classList.add('hidden');
                
                // Reveal main app with fade in
                appContainer.classList.add('loaded');
                
                // Remove overlay from DOM after transition to save resources
                setTimeout(() => {
                    introOverlay.remove();
                }, 1000);
            }, 3500);
        });

        // ===============================
        // CONFIG & STATE
        // ===============================
        const SPREADSHEET_ID = '1UHMo49Q1h36zO2D14xngMk_DDIlCu4C0mdIH4bvGL2U';
        let SHEET_CONFIG = {};
        
        const PROXY_SERVERS = [
            'https://api.allorigins.win/raw?url=',
            'https://corsproxy.io/?',
            'https://api.codetabs.com/v1/proxy?quest='
        ];

        let currentSheet = "";
        let currentData = []; 
        let displayData = [];  
        let sheetCache = {};
        let cacheTimestamp = {};
        let isGlobalSearchMode = false;
        let isPKMode = false; // State baru untuk PK Mode
        let searchTimeout;
        let isLoadingSet = new Set(); 
        
        // DOM Elements
        const appContainer = document.querySelector('.app-container');
        const sidebar = document.getElementById('sidebar');
        const sidebarNav = document.getElementById('sidebarNav');
        const toggleBtn = document.getElementById('toggleSidebar');
        const currentSheetTitle = document.getElementById('currentSheetTitle');
        
        const centerSearchInput = document.getElementById('centerSearchInput');
        const globalToggle = document.getElementById('globalToggle');
        const globalToggleLabel = document.getElementById('globalToggleLabel');
        const pkModeToggle = document.getElementById('pkModeToggle');
        const pkModeLabel = document.getElementById('pkModeLabel');
        
        const detailViewer = document.getElementById('detailViewer');
        const rightDataList = document.getElementById('rightDataList');
        const rightPanelTitle = document.getElementById('rightPanelTitle');
        const copyToast = document.getElementById('copyToast');

        // ===============================
        // DYNAMIC MENU & ICON LOGIC
        // ===============================
        
        function getIconForSheetName(name) {
            const n = name.toUpperCase();
            if (n.includes("BONUS")) return "fa-gift";
            if (n.includes("BANK")) return "fa-university";
            if (n.includes("GAME") || n.includes("MAINAN")) return "fa-gamepad";
            if (n.includes("RESULT") || n.includes("SELESAI")) return "fa-clock";
            if (n.includes("SISTEM") || n.includes("ERROR")) return "fa-server";
            if (n.includes("SITUS")) return "fa-globe";
            if (n.includes("IDN")) return "fa-network-wired";
            if (n.includes("LINETOGEL")) return "fa-bug"; 
            if (n.includes("EWALLET")) return "fa-wallet";
            if (n.includes("LINK")) return "fa-link";
            if (n.includes("PK") || n.includes("SEGALA")) return "fa-layer-group"; 
            return "fa-database"; 
        }

        function getCategory(sheetName) {
            const n = sheetName.toUpperCase();
            if (n.includes("MEMO")) return "MEMO";
            if (n.includes("REPORT")) return "REPORT";
            if (n.includes("LINK")) return "LINKS";
            if (n.includes("PK") || n.includes("SEGALA")) return "PK"; 
            return "OTHER"; 
        }

        function getDisplayName(sheetName) {
            return sheetName;
        }

        // FETCH METADATA
        async function fetchSheetMetadata() {
            const url = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}?alt=json`;
            try {
                const res = await fetch(url);
                if (!res.ok) throw new Error("Failed fetch meta");
                const data = await res.json();
                const sheets = [];
                if (data.feed && data.feed.entry) {
                    data.feed.entry.forEach(entry => {
                        if (entry.title && entry.title.$t) {
                            sheets.push(entry.title.$t);
                        }
                    });
                }
                return sheets.sort();
            } catch (e) {
                console.error("Error fetching metadata", e);
                return [
                    "MEMO PEMBAGIAN BONUS", "MEMO INFORMASI BANK", "MEMO KENDALA PERMAINAN", 
                    "MEMO KETERLAMBATAN RESULT", "MEMO SELESAI RESULT", "MEMO KENDALA SISTEM",
                    "REPORT KENDALA ALL SITUS", "REPORT KENDALA KE IDN", "REPORT KENDALA LINETOGEL", 
                    "REPORT KENDALA BANK & EWALLET", "DAFTAR LINK AKTIF", "SEGALA JENIS PK"
                ];
            }
        }

        // BUILD SIDEBAR ITEMS (Dinamis berdasarkan Mode)
        function renderSidebarItems(sheetNames) {
            const grouped = {
                "MEMO": [],
                "REPORT": [],
                "LINKS": [],
                "PK": [],
                "OTHER": []
            };

            sheetNames.forEach(name => {
                const cat = getCategory(name);
                if (grouped[cat]) {
                    grouped[cat].push(name);
                } else {
                    grouped["OTHER"].push(name);
                }
                SHEET_CONFIG[name] = { name: name };
            });

            let html = '';
            
            // LOGIC FILTER MODE
            if (isPKMode) {
                // JIKA MODE PK AKTIF: Tampilkan HANYA Kategori PK
                if (grouped["PK"].length > 0) {
                    html += `<div class="nav-section"><div class="nav-title">PK GAMES</div>`;
                    grouped["PK"].forEach(name => {
                        const icon = getIconForSheetName(name);
                        const display = getDisplayName(name);
                        html += `
                            <div class="sidebar-item" data-sheet="${name}">
                                <div class="sidebar-icon"><i class="fas ${icon}"></i></div>
                                <div class="sidebar-text">${display}</div>
                            </div>
                        `;
                    });
                    html += `</div>`;
                } else {
                     html += `<div class="nav-section" style="padding:20px; text-align:center; color:#555;">NO PK DATA</div>`;
                }
            } else {
                // JIKA MODE STANDARD: Tampilkan semua KECUALI PK
                const displayCategories = ["MEMO", "REPORT", "LINKS", "OTHER"];
                displayCategories.forEach(category => {
                    if (grouped[category].length === 0) return;
                    html += `<div class="nav-section"><div class="nav-title">${category}</div>`;
                    grouped[category].forEach(name => {
                        const icon = getIconForSheetName(name);
                        const display = getDisplayName(name);
                        html += `
                            <div class="sidebar-item" data-sheet="${name}">
                                <div class="sidebar-icon"><i class="fas ${icon}"></i></div>
                                <div class="sidebar-text">${display}</div>
                            </div>
                        `;
                    });
                    html += `</div>`;
                });
            }

            sidebarNav.innerHTML = html;
            
            // Re-attach listeners
            const items = document.querySelectorAll('.sidebar-item');
            items.forEach(item => {
                item.addEventListener('click', () => loadSheet(item.getAttribute('data-sheet')));
            });

            // Re-highlight active item if exists in current view
            if(currentSheet) {
                const activeItem = document.querySelector(`.sidebar-item[data-sheet="${currentSheet}"]`);
                if(activeItem) activeItem.classList.add('active');
            }
        }

        // RENDER SIDEBAR INIT
        async function initSidebar() {
            const sheetNames = await fetchSheetMetadata();
            renderSidebarItems(sheetNames); // Render pertama kali
            
            const firstSheet = isPKMode ? "SEGALA JENIS PK" : sheetNames[0];
            
            loadSheet(firstSheet);
            preloadAllSheetsBackground(sheetNames);
        }

        // ===============================
        // OPTIMIZATION: BACKGROUND SYNC
        // ===============================
        function preloadAllSheetsBackground(sheetNames) {
            if(!sheetNames) sheetNames = Object.keys(SHEET_CONFIG);
            console.log("Starting Background Sync for speed...");
            
            sheetNames.forEach(name => {
                if (!sheetCache[name] && !isLoadingSet.has(name)) {
                    loadSheetToMemory(name);
                }
            });
        }

        // ===============================
        // FUNCTIONS
        // ===============================
        function formatDateTime(date) {
            if (!date) return '';
            return date.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });
        }

        function showToast(msg = "DATA COPIED") {
            copyToast.textContent = msg;
            copyToast.classList.add('show');
            setTimeout(() => copyToast.classList.remove('show'), 2000);
        }

        // --- DATA FETCHING (OPTIMIZED WITH TIMEOUT) ---
        async function fetchSheetData(sheetName) {
            const urlFormats = [
                `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(sheetName)}`,
                `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/export?format=csv&sheet=${encodeURIComponent(sheetName)}`
            ];
            
            for (const url of urlFormats) {
                for (const proxy of PROXY_SERVERS) {
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 8000); // Timeout 8 detik per attempt

                    try {
                        const res = await fetch(proxy + encodeURIComponent(url), { signal: controller.signal });
                        clearTimeout(timeoutId);
                        
                        if (res.ok) {
                            const txt = await res.text();
                            if (txt.length > 10 && !txt.includes('error')) return txt;
                        }
                    } catch (e) {
                        clearTimeout(timeoutId);
                        continue; 
                    }
                }
            }
            throw new Error('Connection Timeout/Fail');
        }
        
        function parseCSVData(csvText) {
            const rows = [];
            let curRow = [], curVal = '', inQuote = false;
            for (let i = 0; i < csvText.length; i++) {
                const char = csvText[i], next = csvText[i+1];
                if (char === '"') {
                    if (inQuote && next === '"') { curVal += '"'; i++; } else inQuote = !inQuote;
                } else if (char === ',' && !inQuote) {
                    curRow.push(curVal); curVal = '';
                } else if ((char === '\n' || char === '\r') && !inQuote) {
                    if(curVal || curRow.length) curRow.push(curVal);
                    if(curRow.length) rows.push(curRow);
                    curRow = []; curVal = '';
                } else curVal += char;
            }
            if(curVal || curRow.length) { curRow.push(curVal); rows.push(curRow); }
            
            const data = [];
            let idCounter = 1;
            for (let i = 0; i < rows.length; i++) {
                const r = rows[i];
                if (r.length > 0 && r[0]) {
                    data.push({
                        id: idCounter++,
                        title: r[0].trim(),
                        content: r.slice(1).join(' ').trim() || 'NO CONTENT DATA',
                        rowNumber: i + 1
                    });
                }
            }
            return data;
        }

        // --- HELPER: LOAD TO MEMORY ---
        async function loadSheetToMemory(sheetName) {
            if (sheetCache[sheetName]) return;
            if (isLoadingSet.has(sheetName)) return; 

            isLoadingSet.add(sheetName); 

            try {
                const cachedData = localStorage.getItem(`linetogel_cache_${sheetName}`);
                if (cachedData) {
                    sheetCache[sheetName] = JSON.parse(cachedData);
                    cacheTimestamp[sheetName] = localStorage.getItem(`linetogel_ts_${sheetName}`);
                    isLoadingSet.delete(sheetName);
                    return;
                }
            } catch (e) {}

            try {
                const csv = await fetchSheetData(sheetName);
                const parsed = parseCSVData(csv);
                sheetCache[sheetName] = parsed;
                cacheTimestamp[sheetName] = new Date().toISOString();
                try {
                    localStorage.setItem(`linetogel_cache_${sheetName}`, JSON.stringify(parsed));
                    localStorage.setItem(`linetogel_ts_${sheetName}`, cacheTimestamp[sheetName]);
                } catch(e) {}
            } catch (e) {
                console.warn(`Failed to load ${sheetName}`, e);
            } finally {
                isLoadingSet.delete(sheetName); 
            }
        }

        // --- RENDERING ---
        function renderRightList(data, isGlobal = false) {
            rightDataList.innerHTML = '';
            if (data.length === 0) {
                rightDataList.innerHTML = '<div style="text-align:center; padding:20px; color:#555; font-weight:700;">NO DATA</div>';
                return;
            }

            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'list-item';
                div.style.animation = `slideInRight 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards`;
                div.style.animationDelay = `${index * 0.05}s`;
                
                if(isGlobal) {
                    div.innerHTML = `
                        <div class="list-item-category">${item.sourceSheet}</div>
                        <div class="list-item-title">${item.title}</div>
                    `;
                } else {
                    div.innerHTML = `
                        <div class="list-item-title">${item.title}</div>
                    `;
                }
                
                div.onclick = () => {
                    document.querySelectorAll('.list-item').forEach(el => el.classList.remove('active'));
                    div.classList.add('active');
                    
                    if (isGlobal) {
                        loadSheet(item.sourceSheet, item.id);
                    } else {
                        renderCenterDetail(item);
                    }
                };
                rightDataList.appendChild(div);
            });
        }

        function renderCenterDetail(item) {
            let processedContent = item.content.replace(/(https?:\/\/[^\s]+)/g, '<a href="$1" target="_blank">$1</a>');
            let paragraphs = processedContent.split('\n\n');
            let contentHtml = '';
            paragraphs.forEach(para => {
                let cleanPara = para.replace(/\n/g, '<br>');
                contentHtml += `<div class="content-paragraph">${cleanPara}</div>`;
            });

            detailViewer.innerHTML = `
                <div class="data-card-large">
                    <div class="card-header-large">
                        <span class="card-title-large">${item.title}</span>
                        <span class="card-id-large">#${item.id}</span>
                    </div>
                    <div class="card-content-large">
                        ${contentHtml}
                    </div>
                    <button class="copy-btn-large" onclick="copyContentById(${item.id})">
                        <i class="fas fa-copy"></i> SALIN TEKS (KOLOM B)
                    </button>
                </div>
            `;
            detailViewer.scrollTop = 0;
        }

        // --- LOAD SHEET LOGIC ---
        async function loadSheet(sheetName, targetId = null) {
            currentSheet = sheetName;
            isGlobalSearchMode = false;
            
            globalToggle.checked = false;
            updateToggleUI(false);

            currentSheetTitle.textContent = sheetName;
            
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active'));
            const activeItem = document.querySelector(`.sidebar-item[data-sheet="${sheetName}"]`);
            if(activeItem) activeItem.classList.add('active');
            
            rightPanelTitle.textContent = "DATA INDEX";
            centerSearchInput.placeholder = "CARI DATA DI MENU SAAT INI...";
            
            detailViewer.innerHTML = `
                <div class="empty-center">
                    <div class="spinner"></div>
                    <p>LOADING DATABASE...</p>
                </div>
            `;
            rightDataList.innerHTML = '<div style="text-align:center; padding:20px; color:var(--primary-color); font-weight:700;">SCANNING...</div>';
            centerSearchInput.value = '';

            if (sheetCache[sheetName]) {
                currentData = sheetCache[sheetName];
                displayData = [...currentData];
                renderRightList(displayData);
                
                if (targetId) {
                    const item = currentData.find(d => d.id === targetId);
                    if(item) renderCenterDetail(item);
                } else {
                    detailViewer.innerHTML = `
                        <div class="empty-center">
                            <div class="empty-icon-center"><i class="fas fa-hand-pointer"></i></div>
                            <h3>DATA LOADED</h3>
                            <p>Pilih data dari panel kanan.</p>
                            <small style="color:var(--text-muted)">${currentData.length} Records Found</small>
                        </div>`;
                }
                return;
            }

            try {
                await loadSheetToMemory(sheetName);
                currentData = sheetCache[sheetName];
                displayData = [...currentData];
                
                renderRightList(displayData);
                
                if (targetId) {
                    const item = currentData.find(d => d.id === targetId);
                    if(item) renderCenterDetail(item);
                } else {
                    detailViewer.innerHTML = `
                        <div class="empty-center">
                            <div class="empty-icon-center"><i class="fas fa-check"></i></div>
                            <h3>READY</h3>
                            <p>${currentData.length} Records Available.</p>
                        </div>`;
                }
            } catch (e) {
                detailViewer.innerHTML = `<div class="empty-center" style="color:var(--accent-color)">ERROR: ${e.message}</div>`;
                rightDataList.innerHTML = '';
            }
        }

        // --- GLOBAL SEARCH LOGIC ---
        async function performGlobalSearch() {
            const query = centerSearchInput.value.trim().toLowerCase();
            if (!query) {
                rightDataList.innerHTML = '<div style="text-align:center; padding:20px; color:#555;">KETIK UNTUK MENCARI</div>';
                detailViewer.innerHTML = `<div class="empty-center">MENUNGGU INPUT...</div>`;
                return;
            }

            rightPanelTitle.textContent = "GLOBAL SEARCH RESULTS";
            detailViewer.innerHTML = `
                <div class="empty-center">
                    <div class="spinner"></div>
                    <p>SCANNING DATABASES...</p>
                    <small>(Data yang sudah cache akan muncul instan)</small>
                </div>
            `;
            rightDataList.innerHTML = '';

            const allResults = [];
            const sheetNames = Object.keys(SHEET_CONFIG);

            // Filter search berdasarkan Mode
            // Jika PK Mode aktif, hanya cari di sheet PK. Jika tidak, cari di semua KECUALI PK (atau semua, tergantung keinginan user)
            // Default: Search di semua sheet yang TAMPIL di mode saat ini.
            
            const activeCategories = isPKMode ? ["PK"] : ["MEMO", "REPORT", "LINKS", "OTHER"];

            const loadPromises = sheetNames.map(name => loadSheetToMemory(name));
            await Promise.allSettled(loadPromises);

            sheetNames.forEach(sheetName => {
                const cat = getCategory(sheetName);
                // Cek apakah sheet ini masuk dalam category yang sedang aktif
                if (activeCategories.includes(cat) || cat === "OTHER") {
                    if (sheetCache[sheetName]) {
                        const matches = sheetCache[sheetName].filter(item => 
                            item.title.toLowerCase().includes(query) || 
                            item.content.toLowerCase().includes(query)
                        );

                        if (matches.length > 0) {
                            matches.forEach(m => {
                                allResults.push({
                                    ...m,
                                    sourceSheet: sheetName
                                });
                            });
                        }
                    }
                }
            });

            if (allResults.length === 0) {
                detailViewer.innerHTML = `<div class="empty-center">TIDAK ADA DATA DITEMUKAN</div>`;
            } else {
                renderRightList(allResults, true);
                detailViewer.innerHTML = `
                    <div class="empty-center">
                        <div class="empty-icon-center"><i class="fas fa-search"></i></div>
                        <h3>FOUND ${allResults.length} RESULTS</h3>
                        <p>Hasil pencarian di mode aktif.</p>
                    </div>`;
            }
        }

        // --- COPY LOGIC ---
        function copyContentById(id) {
            const item = currentData.find(d => d.id === id);
            if (item && item.content) {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(item.content).then(() => showToast());
                } else {
                    const textArea = document.createElement("textarea");
                    textArea.value = item.content;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    showToast();
                }
            }
        }

        // --- TOGGLE SEARCH MODE ---
        function updateToggleUI(isChecked) {
            if (isChecked) {
                globalToggleLabel.classList.add('active-mode');
                centerSearchInput.placeholder = "GLOBAL SEARCH (SCANNING ALL)...";
                centerSearchInput.focus();
            } else {
                globalToggleLabel.classList.remove('active-mode');
                centerSearchInput.placeholder = "CARI DATA DI MENU SAAT INI...";
                isGlobalSearchMode = false;
                rightPanelTitle.textContent = "DATA INDEX";
                displayData = [...currentData];
                renderRightList(displayData);
                detailViewer.innerHTML = `<div class="empty-center"><div class="empty-icon-center"><i class="fas fa-hand-pointer"></i></div><h3>LOCAL MODE (OFF)</h3></div>`;
            }
        }

        // --- PK MODE LOGIC (BARU) ---
        function switchPKMode(isActive) {
            isPKMode = isActive;
            
            // 1. Update CSS Class Body/Container untuk ganti tema warna
            if(isActive) {
                appContainer.classList.add('pk-mode-active');
                pkModeLabel.classList.add('pk-active');
                centerSearchInput.placeholder = "CARI PK GAMES...";
            } else {
                appContainer.classList.remove('pk-mode-active');
                pkModeLabel.classList.remove('pk-active');
                centerSearchInput.placeholder = "CARI DATA...";
            }

            // 2. Re-render Sidebar Items (Filter item)
            const sheetNames = Object.keys(SHEET_CONFIG);
            renderSidebarItems(sheetNames);

            // 3. Auto load sheet pertama di mode baru
            if (isActive) {
                // Cari sheet PK
                const firstPK = sheetNames.find(name => getCategory(name) === "PK");
                if(firstPK) loadSheet(firstPK);
            } else {
                // Cari sheet bukan PK (prioritas Memo)
                const firstStandard = sheetNames.find(name => getCategory(name) === "MEMO") || sheetNames[0];
                if(firstStandard) loadSheet(firstStandard);
            }
        }

        // --- EVENTS ---
        toggleBtn.addEventListener('click', () => {
            sidebar.classList.toggle('active');
        });

        globalToggle.addEventListener('change', (e) => {
            isGlobalSearchMode = e.target.checked;
            updateToggleUI(isGlobalSearchMode);
            if (isGlobalSearchMode && centerSearchInput.value.trim() !== "") {
                performGlobalSearch();
            }
        });

        // Event Switch PK Mode
        pkModeToggle.addEventListener('change', (e) => {
            switchPKMode(e.target.checked);
        });

        centerSearchInput.addEventListener('input', (e) => {
            clearTimeout(searchTimeout);
            const query = e.target.value.toLowerCase();
            
            if (isGlobalSearchMode) {
                searchTimeout = setTimeout(() => {
                    if(query.length > 0) performGlobalSearch();
                    else {
                        rightDataList.innerHTML = '';
                        detailViewer.innerHTML = `<div class="empty-center">MENUNGGU INPUT...</div>`;
                    }
                }, 600);
            } else {
                displayData = currentData.filter(item => 
                    item.title.toLowerCase().includes(query)
                );
                renderRightList(displayData);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            initSidebar();
        });

        // CSS Spinner Helper
        const style = document.createElement('style');
        style.innerHTML = `.spinner { width: 50px; height: 50px; border: 4px solid rgba(0,243,255,0.1); border-top: 4px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; } @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }`;
        document.head.appendChild(style);

    </script>
</body>
</html>


